{% extends "base.html" %}

{% block content %}
<div class="container mx-auto p-6">
    <!-- Card for Contract Details -->
    <section class="bg-white shadow-md rounded-lg p-6">
        <!-- Contract Header -->
        <header class="mb-6">
            <h2 class="text-2xl font-semibold mb-2">Contrato #{{contract.id}}</h2>
            
        </header>
        
        <!-- Contract Details -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
                <h3 class="text-lg font-semibold text-gray-700">Detalles del Contrato:</h3>
                <ul class="space-y-2 text-gray-600">
                    <li><strong>Dirección:</strong> {{contract.address}}</li>
                    <li><strong>Coordenadas:</strong> {{contract.cordinates}}</li>
                    <li><strong>URL GPS:</strong> <a href="https://maps.google.com" class="text-blue-500 hover:underline" target="_blank">Abrir en Google Maps</a></li>
                    <li><strong>Box:</strong> {{contract.box}}</li>
                    <li><strong>ONT:</strong> {{contract.ont}}</li>
                    <li><strong>Router:</strong> {{contract.router}}</li>
                    <li><strong>Activo:</strong> 
                        {% if not customer.is_active %}
                        <span class="text-green-600">Inactivo</span>
                        {% endif %}
                        <span class="text-green-600">Activo</span>
                    </li>
                </ul>
            </div>
            <div>
                <h3 class="text-lg font-semibold text-gray-700">Información Adicional:</h3>
                <ul class="space-y-2 text-gray-600">
                    <li><strong>Creado en:</strong> 1 de enero de 2023</li>
                    <li><strong>Plan:</strong> Plan Premium 500Mbps</li>
                    <li><strong>Cliente:</strong> Juan Pérez</li>
                </ul>
            </div>
        </div>

        <!-- Action Buttons -->
        <footer class="mt-6 flex justify-end space-x-4">
            
            {% if  contract.is_active %}
            <a href="{% url "create_order" contract.id %}" class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600">
                Crear soporte tecnico
            </button>
            {% endif %}
            <button class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">
                Editar
            </button>
            <button class="bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600">
                Eliminar 
            </button>
        </footer>
    </section>

    <!-- Orders List -->
    <section class="mt-8 bg-gray-50 shadow-md rounded-lg p-6">
        <header class="mb-4">
            <h3 class="text-xl font-semibold text-gray-700">Órdenes relacionadas</h3>
        </header>
        
        <div class="overflow-x-auto">
            <table class="min-w-full border-collapse border border-gray-200 text-gray-700">
                <thead class="bg-gray-100">
                    <tr>
                        <th class="border border-gray-300 px-4 py-2 text-left"># Orden</th>
                        <th class="border border-gray-300 px-4 py-2 text-left">Fecha preferencial</th>
                        <th class="border border-gray-300 px-4 py-2 text-left">fecha creada</th>
                        <th class="border border-gray-300 px-4 py-2 text-left">Tipo</th>
                        <th class="border border-gray-300 px-4 py-2 text-left">Estado</th>
                        <th class="border border-gray-300 px-4 py-2 text-center">Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Example row -->
                    {% for order in orders %}
                    <tr>
                        <td class="border border-gray-300 px-4 py-2">{{order.id}}</td>
                        <td class="border border-gray-300 px-4 py-2">{{order.assigned_date}} {{order.preferential_time}}3</td>
                        <td class="border border-gray-300 px-4 py-2">{{order.created_at}}</td>
                        <td class="border border-gray-300 px-4 py-2">{{order.type}}</td>
                        <td class="border border-gray-300 px-4 py-2 text-green-600">{{order.status}}</td>
                        <td class="border border-gray-300 px-4 py-2 text-center">
                            <button class="text-red-500 hover:underline ml-2">Eliminar</button>
                        </td>
                    </tr>
                    {% endfor %}
                    <!-- Add dynamic rows here -->
                </tbody>
            </table>
        </div>
    </section>
</div>
{% endblock %}
